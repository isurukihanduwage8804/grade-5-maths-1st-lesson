import streamlit as st
import streamlit.components.v1 as components

# ‡∂¥‡∑í‡∂ß‡∑î‡∑Ä‡∑ö ‡∑É‡∑ê‡∂ö‡∑É‡∑î‡∂∏‡∑ä (Wide layout ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª ‡∂á‡∂≠)
st.set_page_config(page_title="‡∂ú‡∂´‡∑í‡∂≠‡∂∫ ‡∂Ω‡∑ù‡∂ö‡∂∫ - 5 ‡∑Å‡∑ä‚Äç‡∂ª‡∑ö‡∂´‡∑í‡∂∫", page_icon="üìù", layout="wide")

# ‡∑Å‡∂∂‡∑ä‡∂Ø ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ì‡∂∏‡∂ß ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂± JavaScript
def play_sound(url):
    components.html(f"""<audio autoplay><source src="{url}" type="audio/mpeg"></audio>""", height=0)

def main():
    # CSS ‡∂∏‡∂ú‡∑í‡∂±‡∑ä ‡∂Ö‡∂ö‡∑î‡∂ª‡∑î ‡∂Ω‡∑ú‡∂ö‡∑î ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∑É‡∑Ñ ‡∂¥‡∑ô‡∂±‡∑î‡∂∏ ‡∑É‡∑ê‡∂ö‡∑É‡∑ì‡∂∏
    st.markdown("""
        <style>
        .question-text { font-size: 32px !important; font-weight: bold; color: #1B4F72; line-height: 1.6; }
        .stRadio > label { font-size: 24px !important; font-weight: 500; }
        .main-title { color: #FF5733; text-align: center; font-size: 50px; font-weight: bold; }
        div.stButton > button { width: 200px; height: 60px; font-size: 24px; border-radius: 10px; }
        </style>
        """, unsafe_allow_html=True)

    st.markdown('<p class="main-title">üåü ‡∂ú‡∂´‡∑í‡∂≠‡∂∫ ‡∂Ω‡∑ù‡∂ö‡∂∫ - 1 ‡∂¥‡∑è‡∂©‡∂∏ üåü</p>', unsafe_allow_html=True)
    st.write("---")

    # ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∂Ø‡∂≠‡∑ä‡∂≠
    questions = [
        {"id": 0, "q": "1. 1, 4, 8, 9 ‡∂∫‡∂± ‡∂â‡∂Ω‡∂ö‡∑ä‡∂ö‡∂∏‡∑ä ‡∑Ñ‡∂≠‡∂ª‡∂∏ ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∂∫‡∑ô‡∂±‡∑ä ‡∂Ω‡∑í‡∑Ä‡∑í‡∂∫ ‡∑Ñ‡∑ê‡∂ö‡∑í ‡∑Ä‡∑í‡∑Å‡∑è‡∂Ω‡∂∏ ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", "options": ["9841", "9481", "8941", "9814"], "correct": "9841"},
        {"id": 1, "q": "2. '6528' ‡∂∫‡∂± ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä ‡∂Ö‡∂ö‡∑î‡∂ª‡∑ô‡∂±‡∑ä ‡∂Ω‡∑í‡∂∫‡∑ñ ‡∑Ä‡∑í‡∂ß ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∑Ä‡∂±‡∑ä‡∂±‡∑ö ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", "options": ["‡∑Ñ‡∂∫‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂Ø‡∑ô‡∑É‡∑í‡∂∫ ‡∂¥‡∂±‡∑É‡∑ä ‡∂Ö‡∂ß", "‡∑Ñ‡∂∫‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂¥‡∂±‡∑ä‡∑É‡∑í‡∂∫ ‡∂Ö‡∑É‡∑ñ ‡∂Ø‡∑ô‡∂ö", "‡∑Ñ‡∂∫‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂¥‡∂±‡∑ä‡∑É‡∑í‡∂∫ ‡∑Ä‡∑í‡∑É‡∑í ‡∂Ö‡∂ß", "‡∑Ñ‡∂∫‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂Ö‡∂ß‡∑É‡∑í‡∂∫ ‡∑Ä‡∑í‡∑É‡∑í ‡∂¥‡∑Ñ"], "correct": "‡∑Ñ‡∂∫‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂¥‡∂±‡∑ä‡∑É‡∑í‡∂∫ ‡∑Ä‡∑í‡∑É‡∑í ‡∂Ö‡∂ß"},
        {"id": 2, "q": "3. '‡∂≠‡∑î‡∂±‡∑ä‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂ë‡∂ö‡∑É‡∑í‡∂∫ ‡∂ë‡∂ö' ‡∂∫‡∂±‡∑ä‡∂± ‡∂â‡∂Ω‡∂ö‡∑ä‡∂ö‡∂∏‡∑ô‡∂±‡∑ä ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∑Ä ‡∂Ω‡∑í‡∂∫‡∂±‡∑ä‡∂±.", "options": ["3110", "3101", "3011", "3001"], "correct": "3101"},
        {"id": 3, "q": "4. 2348 ‡∂∫‡∂± ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä‡∑ö '3' ‡∂â‡∂Ω‡∂ö‡∑ä‡∂ö‡∂∏ ‡∂¥‡∑í‡∑Ñ‡∑í‡∂ß‡∑í ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", "options": ["‡∂ë‡∂ö ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫", "‡∂Ø‡∑Ñ‡∂∫ ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫", "‡∑É‡∑í‡∂∫‡∂∫ ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫", "‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫"], "correct": "‡∑É‡∑í‡∂∫‡∂∫ ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫"},
        {"id": 4, "q": "5. 5024 ‡∂∫‡∂± ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä‡∑ö '0' ‡∂â‡∂Ω‡∂ö‡∑ä‡∂ö‡∂∏‡∑ô‡∂±‡∑ä ‡∂±‡∑í‡∂ª‡∑ñ‡∂¥‡∂´‡∂∫ ‡∑Ä‡∂± ‡∂Ö‡∂ú‡∂∫ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", "options": ["100", "0", "10", "1000"], "correct": "0"},
        {"id": 5, "q": "6. 8027 ‡∂∫‡∂± ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä ‡∑Ä‡∑í‡∑Ñ‡∑í‡∂Ø‡∑î‡∑Ä‡∑è ‡∂Ω‡∑í‡∂∫‡∑ñ ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂Ü‡∂ö‡∑è‡∂ª‡∂∫ ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±.", "options": ["800 + 0 + 20 + 7", "8000 + 200 + 7", "8000 + 0 + 20 + 7", "8000 + 20 + 7"], "correct": "8000 + 0 + 20 + 7"},
        {"id": 6, "q": "7. 9999 ‡∂ß ‡∑Ä‡∂©‡∑è 1‡∂ö‡∑ä ‡∑Ä‡∑ê‡∂©‡∑í ‡∑Ä‡∑ñ ‡∑Ä‡∑í‡∂ß ‡∂Ω‡∑ê‡∂∂‡∑ô‡∂± ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", "options": ["1000", "10001", "10000", "11000"], "correct": "10000"},
        {"id": 7, "q": "8. 69 999 + 1 ‡∑Ñ‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", "options": ["70000", "69100", "60000", "7000"], "correct": "70000"},
        {"id": 8, "q": "9. ‡∂Ø‡∑É ‡∂Ø‡∑Ñ‡∑É‡∑ä 2, ‡∂Ø‡∑Ñ‡∑É‡∑ä 7, ‡∑É‡∑í‡∂∫‡∂∫ 3, ‡∂Ø‡∑Ñ‡∂∫ 9 ‡∑É‡∑Ñ ‡∂í‡∂ö‡∂ö 4 ‡∑Ä‡∂± ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", "options": ["72394", "27394", "27934", "27349"], "correct": "27394"},
        {"id": 9, "q": "10. 40 000 ‡∂∫‡∂± ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä‡∂ß ‡∑Ñ‡∂ª‡∑í‡∂∫‡∂ß‡∂∏ ‡∂¥‡∑ô‡∂ª ‡∂¥‡∑í‡∑Ñ‡∑í‡∂ß‡∑í ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", "options": ["40001", "39990", "39900", "39999"], "correct": "39999"}
    ]

    # Session state ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∂∫‡∑ô‡∂±‡∑ä ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∂Ö‡∂Ç‡∂ö‡∂∫ ‡∂¥‡∑Ä‡∂≠‡∑ä‡∑Ä‡∑è ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏
    if 'q_idx' not in st.session_state:
        st.session_state.q_idx = 0
        st.session_state.score = 0
        st.session_state.answers = {}

    if st.session_state.q_idx < len(questions):
        current_q = questions[st.session_state.q_idx]
        
        # ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫ ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏
        st.markdown(f'<p class="question-text">{current_q["q"]}</p>', unsafe_allow_html=True)
        
        choice = st.radio("‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±:", current_q["options"], key=f"q_{st.session_state.q_idx}", index=None)

        st.write("")
        col1, col2 = st.columns([1, 5])
        
        with col1:
            if st.button("Next ‚û°Ô∏è"):
                if choice:
                    st.session_state.answers[st.session_state.q_idx] = choice
                    if choice == current_q["correct"]:
                        st.session_state.score += 1
                    st.session_state.q_idx += 1
                    st.rerun()
                else:
                    st.warning("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∂ö‡∑ä ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±!")
        
        # ‡∂¥‡∑ä‚Äç‡∂ª‡∂ú‡∂≠‡∑í‡∂∫ ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏
        st.progress((st.session_state.q_idx) / len(questions))
        st.write(f"‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± {st.session_state.q_idx + 1} / {len(questions)}")

    else:
        # ‡∂Ö‡∑Ä‡∑É‡∑è‡∂± ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω ‡∂¥‡∑í‡∂ß‡∑î‡∑Ä
        st.balloons()
        st.markdown(f'<p class="main-title">üìä ‡∂î‡∂∂‡∑ö ‡∂Ω‡∂ö‡∑î‡∂´‡∑î: {st.session_state.score} / 10</p>', unsafe_allow_html=True)
        
        if st.session_state.score >= 8:
            st.success("‡∂â‡∂≠‡∑è ‡∑Ä‡∑í‡∑Å‡∑í‡∑Ç‡∑ä‡∂ß‡∂∫‡∑í! ‡∂î‡∂∂ ‡∂¢‡∂∫‡∂ú‡∑ä‚Äç‡∂ª‡∑Ñ‡∂´‡∂∫ ‡∂ö‡∑Ö‡∑è! üèÜ")
            play_sound("https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3")
        else:
            st.warning("‡∑Ñ‡∑ú‡∂≥ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ‡∂∫‡∂ö‡∑ä! ‡∂≠‡∑Ä ‡∂¥‡∑î‡∑Ñ‡∑î‡∂´‡∑î ‡∑Ä‡∂±‡∑ä‡∂±. üëç")

        if st.button("‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂∏‡∑î‡∂Ω ‡∑É‡∑í‡∂ß ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∂ö‡∂ª‡∂±‡∑ä‡∂± üîÑ"):
            st.session_state.q_idx = 0
            st.session_state.score = 0
            st.session_state.answers = {}
            st.rerun()

if __name__ == "__main__":
    main()
